<!DOCTYPE html>
<html data-bs-theme="light" lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>BravoDesk Dashboard</title>
</head>

<body style="background: #1a1e1b;"><!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Kategorien & Wissenseintr√§ge</title>
  <style>
    /* Allgemein */
    * {
      box-sizing: border-box;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }
    body {
      margin: 0;
      padding: 0;
      background-color: #1a1e1b;
      font-family: sans-serif;
      color: #fff;
    }
    h2 {
      margin-top: 0;
    }

    /* Layout: Sidebar + Hauptbereich */
    .layout {
      display: flex;
      min-height: 100vh;
    }
    .sidebar {
      width: 280px;
      background-color: #1e1e1e;
      display: flex;
      flex-direction: column;
      padding: 15px;
      box-shadow: 2px 0 10px rgba(0,0,0,0.3);
      border-right: 2px solid #2a2a2a;
    }
    .main-content {
      flex-grow: 1;
      background-color: #1a1e1b;
      padding: 20px;
    }

    /* Navigation Sidebar */
    .nav {
      display: flex;
      flex-direction: column;
      list-style: none;
      padding: 0;
      margin: 0;
    }
    .nav li {
      display: block;
      width: 100%;
      padding: 12px;
      border-radius: 6px;
      margin-bottom: 8px;
      background-color: #2a2a2a;
      cursor: pointer;
      transition: background 0.3s;
    }
    .nav li:hover,
    .nav li.active {
      background-color: #1c6b3e;
    }

    /* User-Info */
    .user-info {
      margin-top: auto;
      padding: 12px;
      background-color: #2a2a2a;
      border-radius: 8px;
      display: flex;
      align-items: center;
      gap: 10px;
      position: relative;
      cursor: pointer;
      transition: background 0.3s;
    }
    .user-info:hover {
      background-color: #1c6b3e;
    }

    /* Content Sections (Tabs) */
    .content-section {
      display: none;
    }
    .content-section.active {
      display: block;
    }

    /* Tabelle f√ºr Wissenseintr√§ge */
    table {
      width: 100%;
      border-collapse: collapse;
      box-shadow: 0 4px 10px rgba(0,0,0,0.5);
    }
    th, td {
      border: 1px solid #1e1e1e;
      padding: 10px;
      background-color: #1e1e1e;
    }
    .wissen-cell {
      position: relative;
      overflow: hidden;
      white-space: nowrap;
      text-overflow: ellipsis;
    }
    .wissen-cell:hover::after {
      content: attr(data-fulltext);
      position: absolute;
      bottom: 100%;
      left: 0;
      background-color: #1e1e1e;
      color: #fff;
      padding: 5px;
      border-radius: 4px;
      width: 300px;
      white-space: normal;
      font-size: 12px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.5);
      z-index: 10;
    }

    /* Popup-Overlay */
    .popup-modal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      backdrop-filter: blur(5px);
      justify-content: center;
      align-items: center;
      opacity: 0;
      transform: scale(0.9);
      transition: opacity 0.3s ease, transform 0.3s ease;
      z-index: 100;
    }
    .popup-modal.show {
      display: flex;
      opacity: 1;
      transform: scale(1);
    }
    /* Einheitlicher Popup-Stil */
    .popup-content {
      background-color: #2a2a2a;
      padding: 20px;
      border-radius: 8px;
      width: 500px;
      max-width: 90%;
    }
    .popup-content h3 {
      margin: 0 0 15px;
      color: #fff;
    }
    /* K√ºrzere Inputs (wie die Beschreibung) */
    .popup-content input,
    .popup-content textarea {
      width: 100%;
      font-size: 12px;
      color: #ccc;
      background-color: #1e1e1e;
      border: 1px solid #444;
      border-radius: 4px;
      padding: 4px;
      margin-bottom: 5px;
    }
    /* Buttons im Popup linksb√ºndig */
    .popup-buttons {
      display: flex;
      gap: 10px;
      justify-content: flex-start;
    }
    .popup-buttons button {
      background-color: #1c6b3e;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
      padding: 6px 12px;
      font-size: 14px;
    }
    .popup-buttons button:hover {
      background-color: #13843d;
    }

    /* Kategorien-Bereich */
    .kategorien-wrapper {
      display: flex;
      justify-content: center;
      width: 100%;
    }
    .kategorien-container {
      background-color: #2a2a2a;
      padding: 20px;
      border-radius: 8px;
      width: 320px;
      max-width: 100%;
      box-shadow: 0 0 8px rgba(0,0,0,0.4);
    }
    .kategorien-container h3 {
      margin: 0 0 20px;
      color: #fff;
      font-size: 18px;
    }
    /* Dropdown etwas kompakter */
    .full-width-dropdown {
      width: 100%;
      font-size: 12px;
      background-color: #1e1e1e;
      color: #ccc;
      border: 1px solid #444;
      border-radius: 4px;
      padding: 4px;
    }
    /* Eine Zeile f√ºr Emoji & Beschreibung */
    .kategorien-single-line {
      display: flex;
      gap: 10px;
      margin-top: 15px;
      align-items: flex-end;
    }
    .kategorien-field {
      display: flex;
      flex-direction: column;
      flex: 1;
    }
    .kategorien-field label {
      font-weight: bold;
      margin-bottom: 5px;
      font-size: 12px;
      color: #fff;
    }
    .kategorien-field input {
      font-size: 12px;
      color: #ccc;
      background-color: #1e1e1e;
      border: 0px solid #444;
      border-radius: 4px;
      padding: 4px;
    }
    /* Emoji-Feld schmaler */
    #kategorieEmoji {
      width: 27px;
    }
    /* Buttons in der Kategorienansicht linksb√ºndig */
    .kategorien-buttons {
      display: flex;
      gap: 10px;
      justify-content: flex-start;
      margin-top: 20px;
    }
    .kategorien-buttons button {
      background-color: #1c6b3e;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
      padding: 6px 12px;
      font-size: 14px;
    }
    .kategorien-buttons button:hover {
      background-color: #13843d;
    }

    /* -------------------------------------------
       BLACKLIST-STYLES
       ------------------------------------------- */
    .btn-bl {
      background-color: #1c6b3e;
      color: #fff;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
      padding: 10px 20px;
      margin: 0 5px;
      transition: background 0.3s;
    }
    .btn-bl:hover {
      background-color: #13843d;
    }

    /* -------------------------------------------
       DESIGN-STYLES (angepasst)
       ------------------------------------------- */
    .design-wrapper {
      display: flex;
      justify-content: center;
      width: 100%;
    }
    .design-container {
      background-color: #2a2a2a;
      padding: 20px;
      border-radius: 8px;
      width: 600px; /* Passt du an */
      max-width: 100%;
      box-shadow: 0 0 8px rgba(0,0,0,0.4);
    }

    /* Oberer Bereich: Bild links + Felder rechts */
    .design-top {
      display: flex;
      gap: 30px;  /* Abstand zwischen Bild & Felder */
      align-items: flex-start; /* Bild & Felder oben b√ºndig */
    }
    .design-image {
      text-align: center;
    }
    .design-image img {
      width: 131px;
      height: 131px;
      background: #1e1e1e;
      border-radius: 8px;
      object-fit: cover;
    }
    .design-fields {
      display: flex;
      flex-direction: column;
      gap: 15px; /* Abstand zwischen Name & Status */
      flex: 1;
    }
    .design-fields label {
      font-weight: bold;
      font-size: 15px;
      margin-bottom: 5px;
      color: #fff;
    }
    .design-fields input {
      font-size: 15px;
      color: #ccc;
      background-color: #1e1e1e;
      border: 1px solid #444;
      border-radius: 4px;
      padding: 6px;
    }

    /* Unterer Bereich: Buttons */
    .design-bottom {
      margin-top: 20px;
      display: flex;
      justify-content: flex-end; /* Speichern nach rechts */
      gap: 10px;
    }
    .design-button {
      background-color: #1c6b3e;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
      padding: 8px 16px;
      font-size: 14px;
    }
    .design-button:hover {
      background-color: #13843d;
    }
  </style>
</head>
<body style="background: #1a1e1b;">
  <div class="layout">
    <!-- SIDEBAR -->
    <div class="sidebar">
      <!-- Logo -->
      <div style="text-align: center; margin-bottom: 15px;">
        <img src="assets/img/logo_transparent.png" alt="Logo" style="max-width: 120px; filter: drop-shadow(0 0 5px rgba(255,255,255,0.2));">
      </div>
      <!-- Server Selector Dropdown (bleibt unver√§ndert) -->
      <div style="position: relative; margin-bottom: 15px;">
        <button id="serverButton" onclick="toggleMenu('serverDropdown')" style="background-color: #1c6b3e; color: #fff; padding: 12px; width: 100%; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; display: flex; align-items: center; gap: 8px; justify-content: flex-start;">
          <span id="selectedServer">Benders Destiny</span>
          <span style="font-size: 12px;">‚ñº</span>
        </button>
        <div id="serverDropdown" style="display: none; position: absolute; top: 100%; left: 0; width: 100%; background-color: #2a2e2e; border-radius: 8px; box-shadow: 0 5px 10px rgba(0,0,0,0.3); z-index: 10; opacity: 0; transform: translateY(-10px); transition: opacity 0.3s, transform 0.3s;">
          <div onclick="selectServer('Benders Destiny')" style="padding: 10px; cursor: pointer; border-bottom: 1px solid #3a3a3a; color: #fff;">Benders Destiny</div>
          <div onclick="selectServer('Server 2')" style="padding: 10px; cursor: pointer; border-bottom: 1px solid #3a3a3a; color: #fff;">Server 2</div>
          <div onclick="selectServer('Server 3')" style="padding: 10px; cursor: pointer; color: #fff;">Server 3</div>
        </div>
      </div>
      <!-- Navigation -->
      <ul class="nav">
        <li id="navWissen" class="active" onclick="showSection('wissenseintraege', this)">üìÑ Wissenseintr√§ge</li>
        <li id="navKategorien" onclick="showSection('kategorien', this)">üìÇ Kategorien</li>
        <li onclick="showSection('blacklist', this)">üîí Blacklist</li>
        <li onclick="//showSection('design', this)">üé® Design [COMING SOON]</li>
      </ul>
      <!-- User Info -->
      <div class="user-info" onclick="toggleMenu('userMenu','userArrow')" style="position: relative;">
        <!-- Avatar -->
        <div class="user-avatar" style="width: 40px; height: 40px; background: url('assets/img/avatar.jpg') no-repeat center/cover; border-radius: 50%;"></div>
        <!-- User-Daten (Platzhalter, werden via JS ersetzt) -->
        <div class="user-details" style="display: flex; flex-direction: column; flex-grow: 1;">
          <span class="user-name" style="font-size: 14px; font-weight: bold;">Lade...</span>
          <span class="user-status" style="color: limegreen; font-size: 12px;">‚óè Lade...</span>
        </div>
        <!-- Pfeil -->
        <span id="userArrow" style="color: #fff; transition: transform 0.3s;">‚ñ≤</span>
        <!-- User-Men√º -->
        <div id="userMenu" style="display: none; position: absolute; bottom: calc(100% + 10px); left: 0; width: 100%; background-color: #2a2e2a; padding: 10px; border-radius: 8px; box-shadow: 0 5px 10px rgba(0,0,0,0.3); z-index: 10; opacity: 0; transform: translateY(10px); transition: opacity 0.3s, transform 0.3s;">
          <div onclick="logout()" style="padding: 10px; cursor: pointer; border-bottom: 1px solid #3a3a3a; color: #fff;">üîí Abmelden</div>
        </div>
      </div>
    </div>

  <!-- MAIN CONTENT -->
  <div class="main-content">
    <!-- Wissenseintr√§ge -->
    <div id="wissenseintraege" class="content-section active">
      <h2 style="margin-bottom: 20px;">Wissenseintr√§ge</h2>
      <table>
        <thead>
          <tr>
            <th style="text-align: left" >Wissen</th>
            <th style="width: 100px; text-align: left;">Aktionen</th>
          </tr>
        </thead>
        <tbody>
          <!-- Beispiel-Eintrag 
          <tr>
            <td class="wissen-cell" data-fulltext="Die Nutzung von OOC-Wissen im RP ist verboten! Lorem ipsum dolor sit amet...">
              Die Nutzung von OOC-Wissen im RP ist verboten! Lorem ipsum dolor sit amet...
            </td>
            <td style="vertical-align: middle;">
              <span style="cursor: pointer;" onclick="openEditPopup(this)">‚úèÔ∏è</span>
              <span style="cursor: pointer; margin-left: 10px;" onclick="deleteEntry(this)">‚ùå</span>
            </td>
          </tr>-->
        </tbody>
      </table>
      <div style="text-align: right; margin-top: 15px;">
        <button onclick="openPopup()" style="padding: 10px 20px; background-color: #1c6b3e; color: #fff; border: none; border-radius: 8px; cursor: pointer;">Neu</button>
      </div>
    </div>

    <!-- Kategorien -->
    <div id="kategorien" class="content-section">
      <h2 style="text-align: center;">Kategorien</h2>
      <div class="kategorien-wrapper">
        <div class="kategorien-container">
          <h3>Kategorie bearbeiten</h3>
          <!-- Dropdown -->
          <select id="kategorieSelect" class="full-width-dropdown" onchange="loadCategoryData(this.value)"></select>
          <!-- Emoji & Beschreibung in einer Zeile -->
          <div class="kategorien-single-line">
            <div class="kategorien-field">
              <label for="kategorieEmoji">Emoji</label>
              <input type="text" id="kategorieEmoji">
            </div>
            <div class="kategorien-field">
              <label style="margin-left: -90px;" for="kategorieBeschreibung">Beschreibung</label>
              <input style="margin-left: -90px;" type="text" id="kategorieBeschreibung">
            </div>
          </div>
          <div class="kategorien-buttons">
            <button onclick="openCreateCategoryPopup()">Erstellen</button>
            <button onclick="saveCategoryChanges()">Speichern</button>
            <button onclick="deleteCategory()">L√∂schen</button>
          </div>
        </div>
      </div>
    </div>

    <!-- BLACKLIST -->
    <div id="blacklist" class="content-section">
      <h2 style="margin-bottom: 20px;">Blacklist</h2>
      <table>
        <thead>
          <tr>
            <th style="text-align: left" >User ID</th>
            <th style="text-align: left" >Grund</th>
            <th style="text-align: left" >Datum</th>
          </tr>
        </thead>
        <tbody>
          <!-- Beispiel-Eintr√§ge -->
          <tr>
            <td>130953563188797673</td>
            <td>Trolling, Spamming, Hacking</td>
            <td>14.02.2025 14:16</td>
          </tr>
          <tr>
            <td>130953563188797673</td>
            <td>Trolling, Spamming, Hacking</td>
            <td>14.02.2025 14:16</td>
          </tr>
          <tr>
            <td>130953563188797673</td>
            <td>Trolling, Spamming, Hacking</td>
            <td>14.02.2025 14:16</td>
          </tr>
        </tbody>
      </table>
      <div style="text-align: center; margin-top: 15px;">
        <button class="btn-bl">Entfernen</button>
        <button class="btn-bl">Hinzuf√ºgen</button>
        <button class="btn-bl">Suchen</button>
      </div>
    </div>

    <!-- DESIGN (NEU) -->
    <div id="design" class="content-section">
      <h2 style="text-align:center;">Design</h2>
      <div class="design-wrapper">
        <div class="design-container">
          <!-- Oberer Bereich -->
          <div class="design-top">
            <div class="design-image">
              <img src="assets/img/logo_transparent.png" alt="Bot-Logo">
              <div style="margin-top:10px;">
                <button style="background-color: grey;" class="design-button" onclick="uploadImage()">Bild hochladen</button>
              </div>
            </div>
            <div class="design-fields">
              <div>
                <label style="margin-right: 10px;" for="botName">Bot Name</label>
                <input type="text" id="botName" placeholder="Bot Name">
              </div>
              <div>
                <label style="margin-right: 5px;" for="botStatus">Bot Status</label>
                <input type="text" id="botStatus" placeholder="Bot Status">
              </div>
            </div>
          </div>
          <!-- Unterer Bereich (Speichern-Button) -->
          <div class="design-bottom">
            <button class="design-button" onclick="saveDesign()">Speichern</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- POPUP: Neuen Wissenseintrag erstellen -->
<div id="popupModal" class="popup-modal">
  <div class="popup-content">
    <h3>Neuer Eintrag</h3>
    <textarea id="newEntryText" rows="3" placeholder="Neuer Wissenstext..."></textarea>
    <div class="popup-buttons">
      <button onclick="saveEntry()">Speichern</button>
      <button onclick="closePopup()">Abbrechen</button>
    </div>
  </div>
</div>

<!-- POPUP: Wissenseintrag bearbeiten -->
<div id="editPopupModal" class="popup-modal">
  <div class="popup-content">
    <h3>Eintrag bearbeiten</h3>
    <textarea id="editEntryText" rows="3"></textarea>
    <div class="popup-buttons">
      <button onclick="saveEditEntry()">Speichern</button>
      <button onclick="closeEditPopup()">Abbrechen</button>
    </div>
  </div>
</div>

<!-- POPUP: Neue Kategorie erstellen -->
<div id="createCategoryPopup" class="popup-modal">
  <div class="popup-content">
    <h3>Neue Kategorie erstellen</h3>
    <!-- Name (volle Breite) -->
    <input type="text" id="newCategoryName" placeholder="Kategorie Name">
    <!-- Eine Zeile: Emoji (schmal) + Beschreibung -->
    <div class="create-category-line">
      <input type="text" id="newCategoryEmoji" placeholder="üêõ">
      <input style="margin-bottom: 20px;" type="text" id="newCategoryDescription" placeholder="Beschreibung">
    </div>
    <div class="popup-buttons">
      <button onclick="createCategory()">Speichern</button>
      <button onclick="closeCreateCategoryPopup()">Abbrechen</button>
    </div>
  </div>
</div>

<script>
  /* Tabs umschalten */
  function showSection(sectionId, navItem) {
    // Alle Tabs ausblenden
    document.querySelectorAll('.content-section').forEach(section => {
      section.classList.remove('active');
    });
    // Gew√ºnschten Tab anzeigen
    document.getElementById(sectionId).classList.add('active');
    // Navigation reset
    document.querySelectorAll('.nav li').forEach(li => {
      li.classList.remove('active');
    });
    // Geklicktes Nav-Item hervorheben
    navItem.classList.add('active');
  }

  /* Server-Dropdown */
  function toggleMenu(menuId, arrowId) {
    var menu = document.getElementById(menuId);
    var arrow = arrowId ? document.getElementById(arrowId) : null;
    if (menu.style.display === "block") {
      menu.style.opacity = "0";
      menu.style.transform = "translateY(" + (menuId === 'userMenu' ? '10px' : '-10px') + ")";
      setTimeout(function() { menu.style.display = "none"; }, 300);
      if (arrow) arrow.style.transform = "rotate(0deg)";
    } else {
      menu.style.display = "block";
      setTimeout(function() {
        menu.style.opacity = "1";
        menu.style.transform = "translateY(0)";
      }, 10);
      if (arrow) arrow.style.transform = "rotate(180deg)";
    }
    
  }
  function selectServer(serverName) {
    document.getElementById("selectedServer").innerText = serverName;
    toggleMenu("serverDropdown");
  }

  /* Klick au√üerhalb schlie√üt Men√ºs */
  document.addEventListener("click", function(event) {
    // Server-Dropdown
    if (!event.target.closest("#serverButton") && !event.target.closest("#serverDropdown")) {
      var serverDropdown = document.getElementById("serverDropdown");
      if (serverDropdown && serverDropdown.style.display === "block") {
        toggleMenu("serverDropdown");
      }
    }
    // User-Men√º
    if (!event.target.closest(".user-info") && !event.target.closest("#userMenu")) {
      var userMenu = document.getElementById("userMenu");
      if (userMenu && userMenu.style.display === "block") {
        toggleMenu("userMenu", "userArrow");
      }
    }
  });
</script>
</body>
</html>
  <script src="assets/js/SeverSelector.js"></script>
  <script src="assets/js/UserMenu.js"></script>
  <script src="assets/js/Memory.js"></script>
  <script src="assets/js/Category.js"></script>
  <script src="assets/js/Blacklist.js"></script>
  <script src="assets/js/Design.js"></script>
</body>

</html>